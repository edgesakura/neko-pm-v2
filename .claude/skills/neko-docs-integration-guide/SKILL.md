---
name: docs-integration-guide
description: 既存ドキュメントへの整合性を保った追加・統合パターン。構造分析、適切な挿入位置の特定、相互参照の設計を含む。大規模ドキュメント編集時に使用にゃ。
---

# Docs Integration Guide - ドキュメント統合ガイドにゃ

## Overview

既存の大規模ドキュメントに新しいセクションを追加する際、整合性を保ちながら統合するスキルにゃ。
構造の分析、適切な挿入位置の特定、相互参照の設計を体系的に行い、ドキュメント品質を維持するにゃ〜。

## When to Use

以下のような状況で使用するにゃ：

- **指示書への機能追加**: instructions/*.md に新しいルールやセクションを追加
- **大規模ドキュメント編集**: CLAUDE.md や README.md への追記
- **複数セクションの統合**: 異なる箇所に関連情報を追加
- **既存構造の維持**: ドキュメントの一貫性を保ちながら拡張

トリガーキーワード：
- "instructions/guard-cat.md にセクションを追加して"
- "CLAUDE.md に新しいルールを追記"
- "既存のドキュメント構造を壊さずに"
- "適切な場所に挿入して"

## Instructions

### Phase 1: 構造分析

1. **既存構造の把握**
   ```bash
   # セクション構造の確認
   grep -n "^##" target-file.md | head -30
   ```
   - 主要セクションの一覧を取得にゃ
   - 階層構造（#, ##, ###）を確認にゃ
   - 既存の命名規則・スタイルを把握にゃ

2. **関連セクションの特定**
   - 追加内容に関連する既存セクションを探すにゃ
   - 類似のトピックがどこに配置されているか確認にゃ

3. **挿入位置の決定**
   - 論理的なつながりを考慮にゃ
   - 読者の読み進める順序を意識にゃ
   - 関連セクションの近くに配置にゃ

### Phase 2: 統合設計

1. **セクション名の決定**
   - 既存の命名規則に従うにゃ
   - 絵文字の使用パターンを踏襲にゃ
   - 例: 「## 🔒 ファイルロック機構」

2. **階層レベルの決定**
   - 既存の階層構造に合わせるにゃ
   - 適切な深さ（##, ###, ####）を選択にゃ

3. **相互参照の設計**
   - 既存セクションからの参照を検討にゃ
   - 新セクションから既存セクションへのリンクを計画にゃ

### Phase 3: 統合実行

1. **挿入位置の確認**
   - Read ツールで該当箇所を読み取るにゃ
   - 前後のコンテキストを確認にゃ

2. **Editツールで追加**
   - `old_string`（既存部分）と `new_string`（既存＋新規）を使用にゃ
   - 前後数行を含めて一意に特定にゃ

3. **フォーマットの統一**
   - インデント、空行、箇条書きスタイルを既存に合わせるにゃ
   - コードブロックの記法を統一にゃ

### Phase 4: 整合性検証

1. **追加箇所の確認**
   ```bash
   grep -n "新しいセクション名" target-file.md
   ```
   - 正しい位置に追加されたか確認にゃ

2. **構造の検証**
   ```bash
   grep "^##" target-file.md
   ```
   - セクション構造が壊れていないか確認にゃ

3. **相互参照の確認**
   - リンクが正しく機能するか確認にゃ
   - 参照先が存在するか検証にゃ

## Examples

### Example 1: instructions/guard-cat.md への機能追加

**タスク**: ファイルロック機構と割り込み防止機構を追加

**手順**:
1. 構造分析:
   ```bash
   grep -n "^##" instructions/guard-cat.md | head -30
   ```
   結果: タスク配分セクション（513行）を発見

2. 挿入位置決定:
   - 「## タスク配分」の後
   - 「## 🔴 タイムスタンプの取得方法」の前
   - 理由: タスク配分時に使用する機能なので近くに配置

3. 統合実行:
   - Editツールで該当箇所を読み取り
   - `old_string`に既存の終端部分を含める
   - `new_string`に新規セクション2つを追加

4. 検証:
   ```bash
   grep -n "🔒 ファイルロック機構" instructions/guard-cat.md
   grep -n "🚫 割り込み防止機構" instructions/guard-cat.md
   ```

### Example 2: CLAUDE.md への新ルール追加

**タスク**: コンテキスト保持の四層モデルを追加

**手順**:
1. 構造分析: 既存セクションを確認
2. 挿入位置: 「## neko-pm固有の設定」の前に配置
3. 相互参照: Layer構造の説明を追加
4. 検証: セクション番号の連続性を確認

## Guidelines

### ✅ Do（推奨）

- **必ず構造分析から始める**にゃ
- **挿入位置は論理的に決定**にゃ
- **既存の命名規則・スタイルを踏襲**にゃ
- **前後のコンテキストを含めて一意に特定**にゃ
- **追加後は必ず構造を検証**にゃ

### ❌ Don't（非推奨）

- **ファイル末尾に安易に追加**しないにゃ
- **既存の階層構造を無視**しないにゃ
- **命名規則を勝手に変更**しないにゃ
- **構造の検証をスキップ**しないにゃ
- **一度に大量のセクションを追加**しないにゃ（段階的に）

### 挿入位置の優先順位

1. **関連セクションの直後** - 最も論理的な配置
2. **同じカテゴリ内** - カテゴリが分かれている場合
3. **適切な階層レベル** - 見出しの深さを考慮
4. **読み進める順序** - 自然な流れを意識

### チェックリスト

統合完了時に以下を確認するにゃ：

- [ ] 既存の構造を壊していない
- [ ] セクション名が既存の規則に従っている
- [ ] 階層レベルが適切
- [ ] 前後のコンテキストが自然につながっている
- [ ] 相互参照が正しく機能する
- [ ] コードブロックやフォーマットが統一されている

## Common Patterns

### パターン1: 機能追加系

**特徴**: 新機能を説明するセクション
**配置**: 関連機能の近く、または機能カテゴリ内
**例**: ファイルロック機構 → タスク配分セクションの後

### パターン2: ルール追加系

**特徴**: 禁止事項、推奨事項などのルール
**配置**: ルール集中セクション、または関連ルールの近く
**例**: 絶対禁止事項 → 既存の禁止事項リストに追加

### パターン3: ワークフロー追加系

**特徴**: 手順、フロー、プロセスの説明
**配置**: ワークフローセクション内、または時系列順
**例**: コンパクション復帰手順 → ワークフローセクション内

### パターン4: 参考情報追加系

**特徴**: 補足説明、リファレンス、例
**配置**: 関連する本文の後、または専用の参考セクション
**例**: 用語マッピング → docs/ ディレクトリ

## Related Skills

- **cross-project-pattern-migration**: 他プロジェクトからパターンを移植する際に併用にゃ
- **skill-creator**: 統合パターン自体をスキル化する際に使用にゃ

## Notes

- 大規模ドキュメント編集は「構造分析 → 設計 → 実行 → 検証」の順で進めるにゃ
- 一度に大量の変更をせず、段階的に追加するにゃ
- Editツールの `old_string` は一意に特定できる十分な長さを確保するにゃ〜
